# backend/.htaccess
RewriteEngine On

# Redirect all requests to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [L]

# Prevent directory browsing
Options -Indexes

# Deny direct access to PHP files in api directory
<FilesMatch "\.php$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

# Allow access to specific API endpoints
<FilesMatch "^(submit_quiz_result\.php|get_results\.php)$">
    Order Allow,Deny
    Allow from all
</FilesMatch>